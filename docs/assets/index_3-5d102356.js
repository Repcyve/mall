import{d as U,r as _,a as D,o as F,c as T,b as e,w as a,E as L,e as S,f as $,g as z,h as p,j as B,k as v,l as N,n as M,p as j,t as O,_ as q}from"./index-3449a19b.js";import{s as f}from"./el-message-7e94a6a9.js";const A=s=>f.post("/mall/sms-flash-promotion-product-relation/page",s),G=s=>f.get("/mall/sms-flash-promotion-product-relation/del/"+s.id),H=s=>f.get("/mall/sms-flash-promotion-product-relation/one/"+s.id),J=s=>f.post("/mall/sms-flash-promotion-product-relation/add",s),K=s=>f.post("/mall/sms-flash-promotion-product-relation/edit",s),Q={class:"con"},R={class:"dialog-footer"},W=U({__name:"index_3",setup(s){const V=_([]),t=_({id:0,productId:0,flashPromotionSessionId:0,flashPromotionPrice:0,flashPromotionLimit:0,flashPromotionId:0,flashPromotionCount:0,sort:0,productName:"",sendTime:"",subscribeTime:""}),P=_(""),h=D({current:1,size:10}),d=_(!1),c=async()=>{const n=await A(h);V.value=n.data.page.records},I=async n=>{const o=await H(n);o&&(t.value=o.data.help,d.value=!0),console.log(o)},b=()=>{d.value=!1},g=async n=>{if(n.id){const o=await K(t.value);console.log(o),v.success("提交成功"),d.value=!1,c()}else await J(t.value),v.success("提交成功"),d.value=!1,c()},C=()=>{d.value=!0},w=n=>{try{G(n),v.success("删除成功"),c()}catch(o){console.error(o),v.error("删除失败,请重试")}};return F(()=>{c()}),(n,o)=>{const m=L,u=N,r=M,E=S,i=j,k=O,x=$;return z(),T("div",Q,[e(m,{onClick:C},{default:a(()=>[p("新增")]),_:1}),e(E,{data:V.value,style:{width:"100%"}},{default:a(()=>[e(u,{prop:"id",label:"促销ID"}),e(u,{prop:"flashPromotionCount",label:"促销数量"}),e(u,{prop:"flashPromotionLimit",label:"每人限购数量"}),e(u,{prop:"flashPromotionPrice",label:"促销价格"}),e(u,{prop:"flashPromotionSessionId",label:"促销分类ID"}),e(u,{prop:"sort",label:"排序"}),e(u,{align:"right"},{header:a(()=>[e(r,{modelValue:P.value,"onUpdate:modelValue":o[0]||(o[0]=l=>P.value=l),size:"small",placeholder:"输入搜索内容"},null,8,["modelValue"])]),default:a(l=>[e(m,{size:"small",onClick:y=>I(l.row)},{default:a(()=>[p("修改")]),_:2},1032,["onClick"]),e(m,{size:"small",type:"danger",onClick:y=>w(l.row)},{default:a(()=>[p("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(x,{modelValue:d.value,"onUpdate:modelValue":o[10]||(o[10]=l=>d.value=l),title:"Tips",width:"30%",onClose:o[11]||(o[11]=l=>b())},{footer:a(()=>[B("span",R,[e(m,{type:"primary",onClick:o[8]||(o[8]=l=>g(t.value))},{default:a(()=>[p("提交")]),_:1}),e(m,{onClick:o[9]||(o[9]=l=>b())},{default:a(()=>[p("取消")]),_:1})])]),default:a(()=>[e(k,{model:t.value,"status-icon":"","label-width":"120px",class:"demo-ruleForm"},{default:a(()=>[e(i,{label:"促销Id",prop:"flashPromotionId"},{default:a(()=>[e(r,{modelValue:t.value.flashPromotionId,"onUpdate:modelValue":o[1]||(o[1]=l=>t.value.flashPromotionId=l),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),e(i,{label:"产品ID",prop:"productId"},{default:a(()=>[e(r,{modelValue:t.value.productId,"onUpdate:modelValue":o[2]||(o[2]=l=>t.value.productId=l)},null,8,["modelValue"])]),_:1}),e(i,{label:"促销数量",prop:"flashPromotionCount"},{default:a(()=>[e(r,{modelValue:t.value.flashPromotionCount,"onUpdate:modelValue":o[3]||(o[3]=l=>t.value.flashPromotionCount=l)},null,8,["modelValue"])]),_:1}),e(i,{label:"每人限购数量",prop:"flashPromotionLimit"},{default:a(()=>[e(r,{modelValue:t.value.flashPromotionLimit,"onUpdate:modelValue":o[4]||(o[4]=l=>t.value.flashPromotionLimit=l)},null,8,["modelValue"])]),_:1}),e(i,{label:"促销价格",prop:"flashPromotionPrice"},{default:a(()=>[e(r,{modelValue:t.value.flashPromotionPrice,"onUpdate:modelValue":o[5]||(o[5]=l=>t.value.flashPromotionPrice=l)},null,8,["modelValue"])]),_:1}),e(i,{label:"促销分类ID",prop:"flashPromotionSessionId"},{default:a(()=>[e(r,{modelValue:t.value.flashPromotionSessionId,"onUpdate:modelValue":o[6]||(o[6]=l=>t.value.flashPromotionSessionId=l)},null,8,["modelValue"])]),_:1}),e(i,{label:"排序",prop:"sort"},{default:a(()=>[e(r,{modelValue:t.value.sort,"onUpdate:modelValue":o[7]||(o[7]=l=>t.value.sort=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});const Z=q(W,[["__scopeId","data-v-f09ef7fb"]]);export{Z as default};
