import{d as N,r as i,a as F,o as P,c as D,b as o,w as a,E as I,e as $,f as z,g as B,h as r,i as T,j as p,k as U,l as M,m as j,p as q,_ as A}from"./index-2984dec7.js";import"./el-message-7e94a6a9.js";import{b as G,c as H,e as J,f as K,h as L}from"./index-bc51e55b.js";const O={class:"con"},Q={class:"dialog-footer"},R=N({__name:"index_4",setup(S){const c=i([]),n=i(!1),V=F({current:1,size:10}),f=i(""),y=()=>{n.value=!0},l=i({id:0,memberPhone:"",productName:""}),u=async()=>{const s=await G(V);c.value=s.data.page.records},g=async s=>{const e=await H(s.id);l.value=e.data.help,n.value=!0},v=()=>{n.value=!1},C=async s=>{if(s.id){const e=await J(l.value);console.log(e),p.success("提交成功"),n.value=!1,u()}else await K(l.value),p.success("提交成功"),n.value=!1,u()},w=s=>{try{L(s.id),p.success("删除成功"),u()}catch(e){console.error(e),p.error("删除失败,请重试")}};return P(()=>{u()}),(s,e)=>{const d=I,m=U,_=M,E=$,b=j,k=q,x=z;return B(),D("div",O,[o(d,{onClick:y},{default:a(()=>[r("新增")]),_:1}),o(E,{data:c.value,stripe:"",style:{width:"100%"}},{default:a(()=>[o(m,{prop:"id",label:"ID"}),o(m,{prop:"productName",label:"产品名称"}),o(m,{prop:"memberPhone",label:"型号"}),o(m,{align:"right"},{header:a(()=>[o(_,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=t=>f.value=t),size:"small",placeholder:"输入搜索内容"},null,8,["modelValue"])]),default:a(t=>[o(d,{size:"small",onClick:h=>g(t.row)},{default:a(()=>[r("修改")]),_:2},1032,["onClick"]),o(d,{size:"small",type:"danger",onClick:h=>w(t.row)},{default:a(()=>[r("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),o(x,{modelValue:n.value,"onUpdate:modelValue":e[5]||(e[5]=t=>n.value=t),title:"Tips",width:"30%",onClose:e[6]||(e[6]=t=>v())},{footer:a(()=>[T("span",Q,[o(d,{type:"primary",onClick:e[3]||(e[3]=t=>C(l.value))},{default:a(()=>[r("提交")]),_:1}),o(d,{onClick:e[4]||(e[4]=t=>v())},{default:a(()=>[r("取消")]),_:1})])]),default:a(()=>[o(k,{model:l.value,"status-icon":"","label-width":"120px",class:"demo-ruleForm"},{default:a(()=>[o(b,{label:"数量",prop:"flashPromotionCount"},{default:a(()=>[o(_,{modelValue:l.value.memberPhone,"onUpdate:modelValue":e[1]||(e[1]=t=>l.value.memberPhone=t)},null,8,["modelValue"])]),_:1}),o(b,{label:"产品",prop:"flashPromotionId"},{default:a(()=>[o(_,{modelValue:l.value.productName,"onUpdate:modelValue":e[2]||(e[2]=t=>l.value.productName=t),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});const Z=A(R,[["__scopeId","data-v-77c5aa50"]]);export{Z as default};
