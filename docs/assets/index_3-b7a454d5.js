import{d as U,r as _,a as F,o as T,c as D,b as e,w as a,E as $,e as z,f as B,g as L,h as p,i as N,j as v,k as S,l as M,m as j,p as O,_ as q}from"./index-2984dec7.js";import{s as f}from"./el-message-7e94a6a9.js";const A=s=>f.post("/mall/sms-flash-promotion-product-relation/page",s),G=s=>f.get("/mall/sms-flash-promotion-product-relation/del/"+s.id),H=s=>f.get("/mall/sms-flash-promotion-product-relation/one/"+s.id),J=s=>f.post("/mall/sms-flash-promotion-product-relation/add",s),K=s=>f.post("/mall/sms-flash-promotion-product-relation/edit",s),Q={class:"con"},R={class:"dialog-footer"},W=U({__name:"index_3",setup(s){const V=_([]),t=_({id:0,productId:0,flashPromotionSessionId:0,flashPromotionPrice:0,flashPromotionLimit:0,flashPromotionId:0,flashPromotionCount:0,sort:0,productName:"",sendTime:"",subscribeTime:""}),P=_(""),h=F({current:1,size:10}),d=_(!1),c=async()=>{const n=await A(h);V.value=n.data.page.records},g=async n=>{const o=await H(n);o&&(t.value=o.data.help,d.value=!0),console.log(o)},b=()=>{d.value=!1},I=async n=>{if(n.id){const o=await K(t.value);console.log(o),v.success("提交成功"),d.value=!1,c()}else await J(t.value),v.success("提交成功"),d.value=!1,c()},C=()=>{d.value=!0},w=n=>{try{G(n),v.success("删除成功"),c()}catch(o){console.error(o),v.error("删除失败,请重试")}};return T(()=>{c()}),(n,o)=>{const i=$,m=S,r=M,E=z,u=j,k=O,x=B;return L(),D("div",Q,[e(i,{onClick:C},{default:a(()=>[p("新增")]),_:1}),e(E,{data:V.value,style:{width:"100%"}},{default:a(()=>[e(m,{label:"ID",prop:"id"}),e(m,{prop:"flashPromotionPrice",label:"限制"}),e(m,{prop:"flashPromotionPrice",label:"价格"}),e(m,{prop:"sort",label:"排序"}),e(m,{align:"right"},{header:a(()=>[e(r,{modelValue:P.value,"onUpdate:modelValue":o[0]||(o[0]=l=>P.value=l),size:"small",placeholder:"输入搜索内容"},null,8,["modelValue"])]),default:a(l=>[e(i,{size:"small",onClick:y=>g(l.row)},{default:a(()=>[p("修改")]),_:2},1032,["onClick"]),e(i,{size:"small",type:"danger",onClick:y=>w(l.row)},{default:a(()=>[p("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(x,{modelValue:d.value,"onUpdate:modelValue":o[10]||(o[10]=l=>d.value=l),title:"Tips",width:"30%",onClose:o[11]||(o[11]=l=>b())},{footer:a(()=>[N("span",R,[e(i,{type:"primary",onClick:o[8]||(o[8]=l=>I(t.value))},{default:a(()=>[p("提交")]),_:1}),e(i,{onClick:o[9]||(o[9]=l=>b())},{default:a(()=>[p("取消")]),_:1})])]),default:a(()=>[e(k,{model:t.value,"status-icon":"","label-width":"120px",class:"demo-ruleForm"},{default:a(()=>[e(u,{label:"限时购数量",prop:"flashPromotionCount"},{default:a(()=>[e(r,{modelValue:t.value.flashPromotionCount,"onUpdate:modelValue":o[1]||(o[1]=l=>t.value.flashPromotionCount=l)},null,8,["modelValue"])]),_:1}),e(u,{label:"flashPromotionId",prop:"flashPromotionId"},{default:a(()=>[e(r,{modelValue:t.value.flashPromotionId,"onUpdate:modelValue":o[2]||(o[2]=l=>t.value.flashPromotionId=l),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),e(u,{label:"每人限购数量",prop:"flashPromotionLimit"},{default:a(()=>[e(r,{modelValue:t.value.flashPromotionLimit,"onUpdate:modelValue":o[3]||(o[3]=l=>t.value.flashPromotionLimit=l)},null,8,["modelValue"])]),_:1}),e(u,{label:"限时购价格",prop:"flashPromotionPrice"},{default:a(()=>[e(r,{modelValue:t.value.flashPromotionPrice,"onUpdate:modelValue":o[4]||(o[4]=l=>t.value.flashPromotionPrice=l)},null,8,["modelValue"])]),_:1}),e(u,{label:"编号",prop:"flashPromotionSessionId"},{default:a(()=>[e(r,{modelValue:t.value.flashPromotionSessionId,"onUpdate:modelValue":o[5]||(o[5]=l=>t.value.flashPromotionSessionId=l)},null,8,["modelValue"])]),_:1}),e(u,{label:"productId",prop:"productId"},{default:a(()=>[e(r,{modelValue:t.value.productId,"onUpdate:modelValue":o[6]||(o[6]=l=>t.value.productId=l)},null,8,["modelValue"])]),_:1}),e(u,{label:"排序",prop:"sort"},{default:a(()=>[e(r,{modelValue:t.value.sort,"onUpdate:modelValue":o[7]||(o[7]=l=>t.value.sort=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});const Z=q(W,[["__scopeId","data-v-9814f40f"]]);export{Z as default};
